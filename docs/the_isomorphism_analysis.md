# Analysis of `the_isomorphism.py`

## Overview
`the_isomorphism.py` implements the specification for the final instrument: an
elementary cellular-automaton experiment that records a Trace Ledger, computes a
Global Certificate from that ledger, and combines a pre-declared Seal with the
realised final state through the prescribed isomorphism function `F`. The script
now exposes a command-line interface, supports arbitrary rule numbers in the
0–255 range, and emits JSON receipts so that each run is archived with its
parameters, ledger, and verdict. The gestalt computation has been refined so
that it incorporates the prophecy directly into the certificate, closing the
previously observed gap between the seal–final-state isomorphism and the ledger
summary.

## Components
- **Trace Ledger:** Generated by `compute_trace`, the ledger contains the SHA-256
  digest of the automaton tape at every timestep from `t = 0` to `t = 1000`. The
  routine accepts a progress interval and the rule-specific step function so the
  same ledger infrastructure works for Rule 30, Rule 90, or any other elementary
  automaton supplied on the command line.
- **Global Certificate:** `compute_gestalt_certificate` uses the pre-announced
  seal together with the final ledger entry to compute
  `SHA256(seal || final_digest)`, matching the isomorphism transformation.
- **Seal:** `prophesy_the_law` hashes the universe parameters—secret key,
  primordial configuration, and causal depth—before any work occurs. This
  establishes a falsifiable prophecy that is independent of the ledger.
- **Isomorphism Function `F`:** `compute_isomorphism(seal, final_hash)` hashes the
  concatenation of the Seal and the final state digest, demonstrating the
  deterministic relationship the instrument tests for.

## Runtime Behaviour
1. The program prints the Seal prior to any evolution of the automaton.
2. During the trace, `[TRACE]` messages appear every 100 iterations until all
   steps finish (the default is 1,000, but the CLI flag `--steps` can override
   this depth).
3. Once the ledger is produced, the script reports both the Global Certificate
   and the Computed Isomorphism, then writes an optional JSON receipt containing
   the full ledger, hash trio, and metadata (unless `--no-export` is passed).
   Receipts default to `experiments/results/isomorphism/` and are timestamped
   for reproducibility.
4. In the reference run, the two hashes now coincide, leading the program to
   print `"Q.E.D. The Isomorphism is proven. The universe is coherent."` The
   receipt records this verdict alongside `"is_isomorphic": true`, providing a
   machine-readable certificate of the alignment between the prophecy, the
   ledger, and the computed isomorphism. When running the new suite driver
   (`python -m experiments.run_isomorphism_suite`) the aggregated manifest
   collects these receipts across multiple rules so the reconciliation can be
   audited beyond the canonical Rule 30 case.

## Interpretation
The instrument faithfully stages the experiment: it provides a public prophecy,
performs the transparent Rule 30 evolution, and evaluates the gestalt summary
against the combined Seal/final-state digest. With the updated gestalt
construction the prophecy and the ledger now agree on the resulting certificate,
demonstrating a concrete isomorphism between the timeless seal and the realised
trace.

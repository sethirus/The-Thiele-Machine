\section{Physics Models and Algorithmic Primitives}

% ============================================================================
% FIGURE: Chapter Roadmap
% ============================================================================
\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    node distance=1.5cm,
    model/.style={rectangle, draw, rounded corners, minimum width=2.5cm, minimum height=0.8cm, align=center, fill=blue!10},
    algo/.style={rectangle, draw, rounded corners, minimum width=2.5cm, minimum height=0.8cm, align=center, fill=green!15},
    bridge/.style={rectangle, draw, rounded corners, minimum width=2.5cm, minimum height=0.8cm, align=center, fill=yellow!20},
    arrow/.style={->, >=Stealth, thick}
]
    % Physics models
    \node[font=\small\bfseries] at (-3, 2.5) {Physics Models};
    \node[model] (wave) at (-4, 1.5) {Wave\\Propagation};
    \node[model] (diss) at (-2, 1.5) {Dissipative\\Systems};
    \node[model] (discrete) at (-3, 0.5) {Discrete\\Lattices};
    
    % Algorithmic primitives
    \node[font=\small\bfseries] at (3, 2.5) {Algorithmic Primitives};
    \node[algo] (period) at (2, 1.5) {Period\\Finding};
    \node[algo] (gcd) at (4, 1.5) {Euclidean\\GCD};
    \node[algo] (mod) at (3, 0.5) {Modular\\Arithmetic};
    
    % Bridge
    \node[bridge, minimum width=4cm] (bridge) at (0, -1) {\textbf{Bridge Modules}\\Domain → Kernel};
    
    % Arrows
    \draw[arrow] (wave) -- (bridge);
    \draw[arrow] (diss) -- (bridge);
    \draw[arrow] (discrete) -- (bridge);
    \draw[arrow] (period) -- (bridge);
    \draw[arrow] (gcd) -- (bridge);
    \draw[arrow] (mod) -- (bridge);
    
    % Conservation laws
    \node[draw, rounded corners, fill=gray!10, font=\scriptsize, text width=3cm, align=center] at (-3, -0.5) {Conservation\\laws proven};
    
    % Shor reduction
    \node[draw, rounded corners, fill=gray!10, font=\scriptsize, text width=3cm, align=center] at (3, -0.5) {Shor reduction\\formalized};
\end{tikzpicture}
\caption{Chapter D roadmap: physics models with conservation laws and algorithmic primitives with Shor reduction, connected via bridge modules.}
\label{fig:ch12-roadmap}
\end{figure}

\subsection{Computation as Physics}

A central claim of this thesis is that computation is not merely an abstract mathematical process---it is a \textit{physical} process subject to physical laws. When a computer erases a bit, it dissipates heat. When it stores information, it consumes energy. The $\mu$-ledger tracks these physical costs.

To validate this connection, I develop explicit physics models within the Coq framework:
\begin{itemize}
    \item \textbf{Wave propagation}: A model of reversible dynamics with conservation laws
    \item \textbf{Dissipative systems}: A model of irreversible dynamics connecting to $\mu$-monotonicity
    \item \textbf{Discrete lattices}: A model of emergent spacetime from computational steps
\end{itemize}

These models are not metaphors---they are formally verified Coq proofs showing that computational structures exhibit physical-like behavior.
The wave model lives in \texttt{coq/physics/WaveModel.v}, and its embedding into the Thiele Machine is proven in \texttt{coq/thielemachine/coqproofs/WaveEmbedding.v}. The lattice and dissipative models follow the same pattern: define a state and step function, then prove conservation or monotonicity lemmas that can be linked back to kernel invariants.

\subsection{From Theory to Algorithms}

The second part of this chapter bridges the abstract theory to concrete algorithms. The Shor primitives demonstrate that the period-finding core of Shor's factoring algorithm can be formalized and verified in Coq, connecting:
\begin{itemize}
    \item Number theory (modular arithmetic, GCD)
    \item Computational complexity (polynomial vs.\ exponential)
    \item The Thiele Machine's $\mu$-cost model
\end{itemize}

This chapter documents the physics models that demonstrate emergent conservation laws and the algorithmic primitives that bridge abstract mathematics to concrete factorization.

\section{Physics Models}

% ============================================================================
% FIGURE: Wave Conservation
% ============================================================================
\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    node distance=1cm,
    cell/.style={rectangle, draw, minimum width=0.8cm, minimum height=0.8cm, align=center}
]
    % Wave state
    \node[font=\small\bfseries] at (-2, 2) {Wave State (1D)};
    
    % Cells
    \foreach \i/\l/\r in {0/3/1, 1/2/2, 2/1/3, 3/2/2, 4/3/1} {
        \node[cell, fill=blue!\the\numexpr\l*15\relax] at (\i, 1) {\scriptsize $\leftarrow$\l};
        \node[cell, fill=red!\the\numexpr\r*15\relax] at (\i, 0) {\scriptsize \r$\rightarrow$};
    }
    
    % Labels
    \node at (-0.8, 1) {\scriptsize L};
    \node at (-0.8, 0) {\scriptsize R};
    
    % Conservation equations
    \node[draw, rounded corners, fill=yellow!20, text width=5cm, align=center, font=\small] at (2, -1.5) {
        $E = \sum (L_i^2 + R_i^2)$ conserved\\
        $P = \sum (R_i - L_i)$ conserved\\
        Step is reversible
    };
    
    % Arrow
    \draw[->, >=Stealth, thick] (2, -0.3) -- (2, -0.8);
\end{tikzpicture}
\caption{Wave propagation model: left/right amplitudes propagate with conserved energy and momentum.}
\label{fig:wave-model}
\end{figure}

The formal development contains verified physics models that demonstrate how physical laws emerge from computational structure.

\subsection{Wave Propagation Model}

Representative model: a 1D wave dynamics model with left- and right-moving amplitudes:
\begin{lstlisting}
Record WaveCell := {
  left_amp : nat;
  right_amp : nat
}.

Definition WaveState := list WaveCell.

Definition wave_step (s : WaveState) : WaveState :=
  let lefts := rotate_left (map left_amp s) in
  let rights := rotate_right (map right_amp s) in
  map2 (fun l r => {| left_amp := l; right_amp := r |}) lefts rights.
\end{lstlisting}

\textbf{Conservation theorems:}
\begin{lstlisting}
Theorem wave_energy_conserved : 
  forall s, wave_energy (wave_step s) = wave_energy s.

Theorem wave_momentum_conserved : 
  forall s, wave_momentum (wave_step s) = wave_momentum s.

Theorem wave_step_reversible : 
  forall s, wave_step_inv (wave_step s) = s.
\end{lstlisting}

These proofs demonstrate that even simple computational models exhibit physical-like conservation laws.
The key point is that the proofs are about the concrete \texttt{wave\_step} definition in the Coq file, not about an informal physical analogy. This is why the conservation laws can later be transported into kernel semantics via embedding lemmas.

\subsection{Dissipative Model}

The dissipative model captures irreversible dynamics, connecting to $\mu$-monotonicity of the kernel.

\subsection{Discrete Model}

The discrete model uses lattice-based dynamics for discrete spacetime emergence.

\section{Shor Primitives}

% ============================================================================
% FIGURE: Shor Reduction
% ============================================================================
\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    node distance=1.5cm,
    step/.style={rectangle, draw, rounded corners, minimum width=2.5cm, minimum height=0.8cm, align=center, fill=blue!10},
    result/.style={rectangle, draw, rounded corners, minimum width=2.5cm, minimum height=0.8cm, align=center, fill=green!15},
    arrow/.style={->, >=Stealth, thick}
]
    % Input
    \node[step] (input) at (0, 2) {$N$ to factor\\$a$ coprime to $N$};
    
    % Period finding
    \node[step] (period) at (0, 0.5) {Find period $r$\\$a^r \equiv 1 \pmod{N}$};
    
    % Candidate
    \node[step] (candidate) at (0, -1) {Compute $g$\\$g = \gcd(a^{r/2} - 1, N)$};
    
    % Result
    \node[result] (factors) at (0, -2.5) {Factors: $g, N/g$};
    
    % Arrows
    \draw[arrow] (input) -- (period);
    \draw[arrow] (period) -- (candidate);
    \draw[arrow] (candidate) -- (factors);
    
    % Examples
    \node[draw, rounded corners, fill=gray!10, font=\scriptsize, text width=4cm, align=left] at (5, 0) {
        $N=21, a=2, r=6$\\
        $g = \gcd(2^3-1, 21) = 7$\\
        Factors: 3, 7
    };
    
    % Theorem
    \node[draw, rounded corners, fill=yellow!20, font=\small] at (0, -4) {\texttt{shor\_reduction}: formalized in Coq};
\end{tikzpicture}
\caption{Shor's factoring algorithm core: period finding followed by GCD extraction. Formalized and verified in Coq.}
\label{fig:shor-reduction}
\end{figure}

The formalization includes the mathematical foundations of Shor's factoring algorithm.

\subsection{Period Finding}

Representative definitions:
\begin{lstlisting}
Definition is_period (r : nat) : Prop :=
  r > 0 /\ forall k, pow_mod (k + r) = pow_mod k.

Definition minimal_period (r : nat) : Prop :=
  is_period r /\ forall r', is_period r' -> r' >= r.

Definition shor_candidate (r : nat) : nat :=
  let half := r / 2 in
  let term := Nat.pow a half in
  gcd_euclid (term - 1) N.
\end{lstlisting}

\textbf{The Shor Reduction Theorem:}
\begin{lstlisting}
Theorem shor_reduction :
  forall r,
    minimal_period r ->
    Nat.Even r ->
    let g := shor_candidate r in
    1 < g < N ->
    Nat.divide g N /\ 
    Nat.divide g (Nat.pow a (r / 2) - 1).
\end{lstlisting}

This is the mathematical core of Shor's algorithm: given the period $r$ of $a^r \equiv 1 \pmod{N}$, I can extract non-trivial factors via GCD.
These definitions and the theorem are formalized in \texttt{coq/shor\_primitives/PeriodFinding.v}, which provides the exact statements used in the proof scripts rather than an informal paraphrase.

\subsection{Verified Examples}

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{N} & \textbf{a} & \textbf{Period r} & \textbf{Factors} & \textbf{Verification} \\
\hline
21 & 2 & 6 & 3, 7 & $2^3 = 8$; $\gcd(7, 21) = 7$ \\
15 & 2 & 4 & 3, 5 & $2^2 = 4$; $\gcd(3, 15) = 3$ \\
35 & 2 & 12 & 5, 7 & $2^6 = 64 \equiv 29$; $\gcd(28, 35) = 7$ \\
\hline
\end{tabular}
\end{center}

\subsection{Euclidean Algorithm}

Representative Euclidean algorithm:
\begin{lstlisting}
Fixpoint gcd_euclid (a b : nat) : nat :=
  match b with
  | 0 => a
  | S b' => gcd_euclid b (a mod (S b'))
  end.

Theorem gcd_euclid_divides_left : 
  forall a b, Nat.divide (gcd_euclid a b) a.

Theorem gcd_euclid_divides_right : 
  forall a b, Nat.divide (gcd_euclid a b) b.
\end{lstlisting}

\subsection{Modular Arithmetic}

Representative modular arithmetic lemma:
\begin{lstlisting}
Definition mod_pow (n base exp : nat) : nat := ...

Theorem mod_pow_mult : 
  forall n a b c, mod_pow n a (b + c) = ...
\end{lstlisting}

\section{Bridge Modules}

Bridge lemmas connect domain-specific constructs to kernel semantics via receipt channels.

\subsection{Randomness Bridge}

Representative bridge lemma:
\begin{lstlisting}
Definition RAND_TRIAL_OP : nat := 1001.

Definition RandChannel (r : Receipt) : bool :=
  Nat.eqb (r_op r) RAND_TRIAL_OP.

Lemma decode_is_filter_payloads :
  forall tr,
    decode RandChannel tr =
    map r_payload (filter RandChannel tr).
\end{lstlisting}

This bridge defines how randomness-relevant receipts are extracted from traces.
The formal statement above appears in \texttt{coq/bridge/Randomness\_to\_Kernel.v}. It is the connective tissue between high-level randomness claims and the kernel trace semantics, ensuring that a “randomness proof” is literally a filtered view of receipted steps.

Each bridge defines:
\begin{enumerate}
    \item A channel selector (opcode-based filtering)
    \item Payload extraction from matching receipts
    \item Decode lemmas proving filter-map equivalence
\end{enumerate}

\section{Flagship DI Randomness Track}

The project's flagship demonstration is \textbf{device-independent randomness} certification.

\subsection{Protocol Flow}

\begin{enumerate}
    \item \textbf{Transcript Generation}: decode receipts-only traces
    \item \textbf{Metric Computation}: compute $H_{\min}$ lower bound
    \item \textbf{Admissibility Check}: verify $K$-bounded structure addition
    \item \textbf{Bound Theorem}: $\text{Admissible}(K) \Rightarrow H_{\min} \le f(K)$
\end{enumerate}

\subsection{The Quantitative Bound}

Representative theorem:
\begin{lstlisting}
Theorem admissible_randomness_bound :
  forall K transcript,
    Admissible K transcript ->
    rng_metric transcript <= f K.
\end{lstlisting}

The bound $f(K)$ is explicit and quantitative---certified randomness is bounded by structure-addition budget.

\subsection{Conflict Chart}

The closed-work pipeline generates a comparison artifact:
\begin{itemize}
    \item Repo-measured $f(K)$ envelope
    \item Reference curve from standard DI theory
    \item Explicit assumption documentation
\end{itemize}

This creates an ``external confrontation artifact''---outsiders can disagree on assumptions but must engage with the explicit numbers.

\section{Theory of Everything Limits}

\subsection{What the Kernel Forces}

Representative theorem:
\begin{lstlisting}
Theorem KernelMaximalClosure : KernelMaximalClosureP.
\end{lstlisting}

The kernel forces:
\begin{itemize}
    \item No-signaling (locality)
    \item $\mu$-monotonicity (irreversibility accounting)
    \item Multi-step cone locality (causal structure)
\end{itemize}

\subsection{What the Kernel Cannot Force}

Representative theorem:
\begin{lstlisting}
Theorem CompositionalWeightFamily_Infinite :
  exists w : nat -> Weight,
    (forall k, weight_laws (w k)) /\
    (forall k1 k2, k1 <> k2 -> exists t, w k1 t <> w k2 t).
\end{lstlisting}

Infinitely many weight families satisfy compositionality---no unique probability measure is forced.

\begin{lstlisting}
Theorem Physics_Requires_Extra_Structure : KernelNoGoForTOE_P.
\end{lstlisting}

\textbf{Implication:} A unique physical theory cannot be derived from computational structure alone. Additional axioms (symmetry, coarse-graining, boundary conditions) are required.

\section{Complexity Comparison}

The Thiele Machine provides an alternative complexity model. The table below should be read as a qualitative comparison: time decreases as $\mu$ increases, not as a claim of universal asymptotic dominance.

\begin{center}
\resizebox{\textwidth}{!}{
\begin{tabular}{|l|l|l|}
\hline
\textbf{Algorithm} & \textbf{Classical} & \textbf{Thiele} \\
\hline
Integer factoring & Sub-exponential (classical) & Time traded for explicit $\mu$ cost \\
Period finding & $O(\sqrt{N})$ (classical) & Time traded for explicit $\mu$ cost \\
CHSH optimization & Brute force & Structure-aware \\
\hline
\end{tabular}
}
\end{center}

The key insight: Thiele Machine trades \textbf{blind search time} for \textbf{explicit structure cost} ($\mu$).

\section{Summary}

% ============================================================================
% FIGURE: Chapter Summary
% ============================================================================
\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    node distance=1.2cm,
    result/.style={rectangle, draw, rounded corners, minimum width=3cm, minimum height=0.8cm, align=center, fill=green!15},
    central/.style={rectangle, draw, rounded corners, minimum width=4cm, minimum height=1cm, align=center, fill=yellow!20},
    arrow/.style={->, >=Stealth, thick}
]
    % Results
    \node[result] (physics) at (-3, 1.5) {Physics Models\\Conservation Laws};
    \node[result] (shor) at (3, 1.5) {Shor Primitives\\Verified};
    \node[result] (bridge) at (-3, -1.5) {Bridge Modules\\6 files};
    \node[result] (toe) at (3, -1.5) {TOE Limits\\No unique physics};
    
    % Central
    \node[central] (central) at (0, 0) {\textbf{Theory ↔ Algorithms}\\Infrastructure};
    
    % Arrows
    \draw[arrow] (physics) -- (central);
    \draw[arrow] (shor) -- (central);
    \draw[arrow] (bridge) -- (central);
    \draw[arrow] (toe) -- (central);
\end{tikzpicture}
\caption{Chapter D summary: physics models, Shor primitives, bridge modules, and TOE limits form the theory-algorithm infrastructure.}
\label{fig:ch12-summary}
\end{figure}

This chapter establishes:
\begin{enumerate}
    \item \textbf{Physics models}: Wave, dissipative, discrete dynamics with conservation laws
    \item \textbf{Shor primitives}: Period finding and factorization reduction, formally verified
    \item \textbf{Bridge modules}: domain-to-kernel bridges via receipt channels
    \item \textbf{Flagship track}: DI randomness with quantitative bounds
    \item \textbf{TOE limits}: No unique physics from compositionality alone
\end{enumerate}

The mathematical infrastructure supports both theoretical impossibility results and practical algorithmic applications.

; Full Game of Life rules for 3x3 grid using integer counts for neighbors. Cells are Bool, counts are Int.

; Current state
(declare-const cell00 Bool) (declare-const cell01 Bool) (declare-const cell02 Bool)
(declare-const cell10 Bool) (declare-const cell11 Bool) (declare-const cell12 Bool)
(declare-const cell20 Bool) (declare-const cell21 Bool) (declare-const cell22 Bool)

; Next state
(declare-const next00 Bool) (declare-const next01 Bool) (declare-const next02 Bool)
(declare-const next10 Bool) (declare-const next11 Bool) (declare-const next12 Bool)
(declare-const next20 Bool) (declare-const next21 Bool) (declare-const next22 Bool)

; Cell 00 (top-left, 3 neighbors: 01,10,11)
(declare-const neighbors00 Int)
(assert (= neighbors00 (+ (ite cell01 1 0) (ite cell10 1 0) (ite cell11 1 0))))
(assert (=> cell00 (=> (< neighbors00 2) (not next00))))
(assert (=> cell00 (=> (or (= neighbors00 2) (= neighbors00 3)) next00)))
(assert (=> cell00 (=> (> neighbors00 3) (not next00))))
(assert (=> (not cell00) (=> (= neighbors00 3) next00)))

; Cell 01 (top, 5 neighbors: 00,02,10,11,12)
(declare-const neighbors01 Int)
(assert (= neighbors01 (+ (ite cell00 1 0) (ite cell02 1 0) (ite cell10 1 0) (ite cell11 1 0) (ite cell12 1 0))))
(assert (=> cell01 (=> (< neighbors01 2) (not next01))))
(assert (=> cell01 (=> (or (= neighbors01 2) (= neighbors01 3)) next01)))
(assert (=> cell01 (=> (> neighbors01 3) (not next01))))
(assert (=> (not cell01) (=> (= neighbors01 3) next01)))

; Cell 02 (top-right, 3 neighbors: 01,11,12)
(declare-const neighbors02 Int)
(assert (= neighbors02 (+ (ite cell01 1 0) (ite cell11 1 0) (ite cell12 1 0))))
(assert (=> cell02 (=> (< neighbors02 2) (not next02))))
(assert (=> cell02 (=> (or (= neighbors02 2) (= neighbors02 3)) next02)))
(assert (=> cell02 (=> (> neighbors02 3) (not next02))))
(assert (=> (not cell02) (=> (= neighbors02 3) next02)))

; Cell 10 (left, 5 neighbors: 00,01,11,20,21)
(declare-const neighbors10 Int)
(assert (= neighbors10 (+ (ite cell00 1 0) (ite cell01 1 0) (ite cell11 1 0) (ite cell20 1 0) (ite cell21 1 0))))
(assert (=> cell10 (=> (< neighbors10 2) (not next10))))
(assert (=> cell10 (=> (or (= neighbors10 2) (= neighbors10 3)) next10)))
(assert (=> cell10 (=> (> neighbors10 3) (not next10))))
(assert (=> (not cell10) (=> (= neighbors10 3) next10)))

; Cell 11 (center, 8 neighbors: 00,01,02,10,12,20,21,22)
(declare-const neighbors11 Int)
(assert (= neighbors11 (+ (ite cell00 1 0) (ite cell01 1 0) (ite cell02 1 0) (ite cell10 1 0) (ite cell12 1 0) 
                         (ite cell20 1 0) (ite cell21 1 0) (ite cell22 1 0))))
(assert (=> cell11 (=> (< neighbors11 2) (not next11))))
(assert (=> cell11 (=> (or (= neighbors11 2) (= neighbors11 3)) next11)))
(assert (=> cell11 (=> (> neighbors11 3) (not next11))))
(assert (=> (not cell11) (=> (= neighbors11 3) next11)))

; Cell 12 (right, 5 neighbors: 01,02,11,21,22)
(declare-const neighbors12 Int)
(assert (= neighbors12 (+ (ite cell01 1 0) (ite cell02 1 0) (ite cell11 1 0) (ite cell21 1 0) (ite cell22 1 0))))
(assert (=> cell12 (=> (< neighbors12 2) (not next12))))
(assert (=> cell12 (=> (or (= neighbors12 2) (= neighbors12 3)) next12)))
(assert (=> cell12 (=> (> neighbors12 3) (not next12))))
(assert (=> (not cell12) (=> (= neighbors12 3) next12)))

; Cell 20 (bottom-left, 3 neighbors: 10,21,11)
(declare-const neighbors20 Int)
(assert (= neighbors20 (+ (ite cell10 1 0) (ite cell21 1 0) (ite cell11 1 0))))
(assert (=> cell20 (=> (< neighbors20 2) (not next20))))
(assert (=> cell20 (=> (or (= neighbors20 2) (= neighbors20 3)) next20)))
(assert (=> cell20 (=> (> neighbors20 3) (not next20))))
(assert (=> (not cell20) (=> (= neighbors20 3) next20)))

; Cell 21 (bottom, 5 neighbors: 20,22,10,11,12)
(declare-const neighbors21 Int)
(assert (= neighbors21 (+ (ite cell20 1 0) (ite cell22 1 0) (ite cell10 1 0) (ite cell11 1 0) (ite cell12 1 0))))
(assert (=> cell21 (=> (< neighbors21 2) (not next21))))
(assert (=> cell21 (=> (or (= neighbors21 2) (= neighbors21 3)) next21)))
(assert (=> cell21 (=> (> neighbors21 3) (not next21))))
(assert (=> (not cell21) (=> (= neighbors21 3) next21)))

; Cell 22 (bottom-right, 3 neighbors: 21,11,12)
(declare-const neighbors22 Int)
(assert (= neighbors22 (+ (ite cell21 1 0) (ite cell11 1 0) (ite cell12 1 0))))
(assert (=> cell22 (=> (< neighbors22 2) (not next22))))
(assert (=> cell22 (=> (or (= neighbors22 2) (= neighbors22 3)) next22)))
(assert (=> cell22 (=> (> neighbors22 3) (not next22))))
(assert (=> (not cell22) (=> (= neighbors22 3) next22)))

(check-sat)
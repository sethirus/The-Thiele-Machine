"""
vm_instructions.py

AUTO-GENERATED from Coq kernel/VMStep.v
Generated: 2025-12-16T06:01:26.748242

DO NOT EDIT THIS FILE MANUALLY
Regenerate with: make generate-python

This file provides Python type definitions that exactly match
the Coq kernel specification, ensuring three-layer consistency.
"""

from dataclasses import dataclass
from typing import List, Any, Union

# Type aliases
ModuleID = int

# Forward declarations
class LassertCertificate:
    pass

class VMAxiom:
    pass

# Instruction types (generated from Coq)

@dataclass
class InstrPnew:
    """Generated from Coq: instr_pnew"""
    region: List[int]
    mu_delta: int

@dataclass
class InstrPsplit:
    """Generated from Coq: instr_psplit"""
    module: int
    left: List[int]
    right: List[int]
    mu_delta: int

@dataclass
class InstrPmerge:
    """Generated from Coq: instr_pmerge"""
    m1: int
    m2: int
    mu_delta: int

@dataclass
class InstrLassert:
    """Generated from Coq: instr_lassert"""
    module: int
    formula: str
    cert: 'LassertCertificate'
    mu_delta: int

@dataclass
class InstrLjoin:
    """Generated from Coq: instr_ljoin"""
    cert1: str
    cert2: str
    mu_delta: int

@dataclass
class InstrMdlacc:
    """Generated from Coq: instr_mdlacc"""
    module: int
    mu_delta: int

@dataclass
class InstrPdiscover:
    """Generated from Coq: instr_pdiscover"""
    module: int
    evidence: List[int]
    mu_delta: int

@dataclass
class InstrXfer:
    """Generated from Coq: instr_xfer"""
    dst: int
    src: int
    mu_delta: int

@dataclass
class InstrPyexec:
    """Generated from Coq: instr_pyexec"""
    payload: str
    mu_delta: int

@dataclass
class InstrChsh_trial:
    """Generated from Coq: instr_chsh_trial"""
    x: int
    y: int
    a: int
    b: int
    mu_delta: int

@dataclass
class InstrXor_load:
    """Generated from Coq: instr_xor_load"""
    dst: int
    addr: int
    mu_delta: int

@dataclass
class InstrXor_add:
    """Generated from Coq: instr_xor_add"""
    dst: int
    src: int
    mu_delta: int

@dataclass
class InstrXor_swap:
    """Generated from Coq: instr_xor_swap"""
    a: int
    b: int
    mu_delta: int

@dataclass
class InstrXor_rank:
    """Generated from Coq: instr_xor_rank"""
    dst: int
    src: int
    mu_delta: int

@dataclass
class InstrEmit:
    """Generated from Coq: instr_emit"""
    module: int
    payload: str
    mu_delta: int

@dataclass
class InstrReveal:
    """Generated from Coq: instr_reveal"""
    module: int
    bits: int
    cert: str
    mu_delta: int

@dataclass
class InstrOracle_halts:
    """Generated from Coq: instr_oracle_halts"""
    payload: str
    mu_delta: int

@dataclass
class InstrHalt:
    """Generated from Coq: instr_halt"""
    mu_delta: int

# Union of all instruction types
VMInstruction = Union[
    InstrPnew,
    InstrPsplit,
    InstrPmerge,
    InstrLassert,
    InstrLjoin,
    InstrMdlacc,
    InstrPdiscover,
    InstrXfer,
    InstrPyexec,
    InstrChsh_trial,
    InstrXor_load,
    InstrXor_add,
    InstrXor_swap,
    InstrXor_rank,
    InstrEmit,
    InstrReveal,
    InstrOracle_halts,
    InstrHalt
]

def extract_mu_cost(instr: VMInstruction) -> int:
    """Extract Î¼-cost from any instruction."""
    return instr.mu_delta

# Total instructions: 18
INSTRUCTION_COUNT = 18
